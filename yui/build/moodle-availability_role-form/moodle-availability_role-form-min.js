YUI.add("moodle-availability_role-form",function(b,a){M.availability_role=M.availability_role||{};M.availability_role.form=b.Object(M.core_availability.plugin);M.availability_role.form.roles=null;M.availability_role.form.initInner=function(c){this.roles=c};M.availability_role.form.getNode=function(g){var f='<label><span class="pr-3">'+M.util.get_string("title","availability_role")+'</span> <span class="availability-group"><select name="id" class="custom-select"><option value="choose">'+M.util.get_string("choosedots","moodle")+"</option>";var c=-1;var e=false;b.each(this.roles,function(i){if(i.typeid!=c){c=i.typeid;if(e){f+="</optgroup>"}f+='<optgroup label="'+i.type+'">';e=true}f+='<option value="'+i.typeid+"_"+i.id+'">'+i.name+"</option>"});if(e){f+="</optgroup>"}f+="</select></span></label>";var h=b.Node.create("<span>"+f+"</span>");if(g.id!==undefined&&h.one("select[name=id] option[value="+g.typeid+"_"+g.id+"]")){h.one("select[name=id]").set("value",g.typeid+"_"+g.id)}if(!M.availability_role.form.addedEvents){M.availability_role.form.addedEvents=true;var d=b.one(".availability-field");d.delegate("change",function(){M.core_availability.form.update()},".availability_role select")}return h};M.availability_role.form.fillValue=function(e,d){var c=d.one("select[name=id]").get("value");if(c==="choose"){e.id="choose"}else{c=c.split("_");e.typeid=parseInt(c[0],10);e.id=parseInt(c[1],10)}};M.availability_role.form.fillErrors=function(e,c){var d={};this.fillValue(d,c);if(d.id==="choose"){e.push("availability_role:error_selectrole")}}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});